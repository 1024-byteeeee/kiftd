KIFT——快捷、强大、小巧的开源网盘系统

【青阳网络文件系统自述文档】

>简介

#何为kift？

1，kift是一款使用简单、功能齐全的小型网盘搭建系统(解压即用版本叫做kiftd)。只需一个浏览器，您就可以在您的办公室内、家中或小型局域网内共享您的任何文件，甚至是让您的朋友在线播放其中的视频而无需下载。

2，kift是一款功能齐全的网盘。您只想将删除文件的权利给与您信任的人？您想让您的学生只能上传自己的作业而不能下载抄袭其他人的作业？kitf的权限管理能力能轻松完成您的需求。

3，kift还是一款开源免费的网盘。您无需任何投入，您需要做的仅仅是下载，解压，然后开始使用。就是这么简单。害怕它隐藏不知名的代码偷用您的资源“挖矿”？现在，您可以在github上随时查看和拷贝本应用的全部源代码，并自己动手编译它。您还可以根据自己的喜好随意修改它，无论如何，一切任由您操作。

#资源导航:
*如果您仅仅需要马上建立一个可用的网盘，请阅读下方《1分钟快速部署》部分。
当然，您也可以阅读github上的快速开始：https://github.com/KOHGYLW/kiftd/wiki 。
如果您是一位开发者，下载源代码请前往这个地址：https://github.com/KOHGYLW/KohgylwIFT 。

>现在开始使用！

#如果您使用本应用，即视为同意下列条款：
1，本应用无使用限制，但使用本应用所造成的任何后果需由使用者本人承担（包括但不限于：非法传播文件导致的后果）。
2，任何人均可以复制、修改和编译本应用的源代码，但所造成的任何后果均由修改者本人自行承担。

#1分钟快速部署：

第一步：首先，您需要在您的计算机上安装java 8或以上版本的java环境，这是本应用运行的先决条件。java的安装并不麻烦，您可以很快完成它。

第二步：按照下列操作启动您的服务器：
1，首先，进入本应用的主目录。
windows:
2，进入bin目录，以管理员权限运行startup.bat文件。
3，使用浏览器（推荐使用Chrome或FireFox或其内核的浏览器）访问127.0.0.1。例如，如果您用的是360安全浏览器，那么您应该使用“极速模式”访问本应用。
Linux/Unix(含Mac OS X):
2，使用终端进入bin目录，以Root权限运行startup.sh文件：
-------------------
$ sudo ./startup.sh
-------------------
3，使用浏览器访问127.0.0.1。（可以参见windows的这一步操作，完全一样）

注：部署过程毫无难度，而且即使失败了也不会对您的系统产生任何负面影响，您可以放心大胆地多次尝试。

第三步：进入主页
如果您需要他人访问您的网盘，请在局域网内其他主机上，使用浏览器访问您本机IP地址，即可进入本系统。
例如 http://192.168.1.2/ 其中IP地址部分需根据您的计算机IP地址进行替换。

第四步：抢先体验
现在，您可以先使用内置用户(admin,000000)进行登录，并体验该网盘的主要功能了，这些功能请参见下方《主要功能介绍》。至于应该如何修改用户密码或添加更多的用户，请阅读后面的《用户授权》部分。

>主要功能介绍

#各种文件的上传、下载、删除和管理
这些都是一个网盘最基本的功能。本系统尽可能的将其做的简单易用，让您在使用部署时几乎没有学习成本。界面简单高效是本系统最大的特色，本人相信对于大多数喜欢体验开源技术的用户而言，一个高速、流畅、干净又足够硬派的系统远比一个界面华丽却相应缓慢的系统更具有吸引力。

#mp4与webm格式资源在线播放
上传至本系统的全部mp4资源和webm资源均可使用在线播放功能，需要用户具备[下载]权限。点击文件后方操作栏中的“播放”按钮即可。点击页面右上方“关闭”按钮停止播放并关闭播放页面。

#PDF文档在线预览
您可以直接查看PDF文档的内容而无需下载它。在线查看提供了页数跳转、旋转、搜索等功能。这个功能是为了方便办公环境下更好的区分不同版本的PDF文档，有些文档可能看上去很像但是内容有细微差别，例如不同日期的工作报表。这种情况下，使用在线预览功能会方便许多。

#图片在线查看
本应用也支持bmp、jpg、jpeg、png、gif五种常见图片格式的在线查看。您可以通过它快速查找全部文件列表中您所中意的那张图片。

>基本设置

为了方便个人操作，本应用的全部设置都基于文件配置。您可能对这种配置方式不太熟悉甚至觉得它很高深，不过不用担心，请跟着下面的说明大胆尝试一下，之后，您可能会喜欢上这种配置方式并体会到它的优点。

######进行用户设置和授权:
1，请进入:“ 应用主目录/webapps/ROOT/etc ”这个目录。
2，使用文本编辑器（例如记事本）打开“ configure.properties ”文件。
3，请按照该文件中的英文示例和提示进行各项配置（例如设置用户和密码、限定权限等）。

当然，第一眼您可能觉得里面的一大堆文字看上去不容易理解，不过这只是一种错觉。由于在该文件中使用中文字符会存在乱码问题，因此本人不得不用英文编写说明内容，好在这些说明还是比较容易阅读的（阅读难度与本文相同）。您要知道，在该文本中，所有以“#”开头的行均为说明注释，这些内容并非配置内容，它们仅仅是用来在告诉你某个配置是干什么的以及如何进行修改；而那些不以“#”开头的行才是真正的配置参数。修改时，您应该像本人一样用纯英文编辑这个文件。
（例如编辑用户列表时，各个用户名之间必须使用英文逗号进行分割）

######修改下载缓冲区大小:
下载缓冲区决定了服务器使用多少内存为用户提供下载缓冲。进入“ 应用主目录/webapps/ROOT/etc ”目录，使用文本编辑器打开“ configure.properties ”文件，更改buff.size参数。该参数不可超过2147483647且不可超过您计算机的内存大小。单位为byte（单位换算：1MB=1024KB=1024*1024byte）。
注意，如果您需要更优化的性能处理高并发下载，请配置bin目录下的catline.bat(windows)或catline.sh(Unix/Linux)文件，修改相应的JVM参数，默认内存堆大小为1GB。

######关闭服务器:
windows:
进入bin目录，运行shutdown.dat文件。
Linux/Unix(含Mac OS X):
使用终端进入bin目录，运行shutdown.sh文件：
---------------
$ ./shutdown.sh
---------------

######关于服务器文件:
除了服务器主目录内的所有文件外，本应用还会在您的“用户目录/文档”下生成KohgylwIFT文件夹，内部存放有运行服务器所必须的信息和日志文件。请勿在服务器运行的过程中修改或删除其内容。

######卸载:
删除服务器主目录并删除您用户目录下“文档”文件夹内的KohgylwIFT文件夹即可。

######查看日志信息:
系统提供了三级日志记录功能。如果您开启了日志记录（在应用主目录/webapps/ROOT/etc/configure.properties文件内设置log项为“R”或“E”，默认为“E”），那么系统会以纯文本的形式记录日志，并以纯文本的形式存放在您的用户目录下的“文档/KohgylwIFT/log”文件夹内（Linux:~/Documents/KohgylwIFT/log），日志文件的命名格式为“XXXX_XX_XX.klog”，它表示日志的创建日期。文件内每条日志记录以空行隔开。
日志记录分为两类：Exception和Event
前者表示该条记录记录的是应用在运行过程中遇到的异常信息，该信息对于调试和恢复系统具有重大作用。后者表示该条记录记录的是用户的操作过程（如果日志等级设定为E），例如删除文件和下载文件，它会记录操作者账户ACCOUNT、操作类型OPERATE、文件所在的路径PATH、文件名NAME等信息，您可以根据该信息了解所有用户的关键操作历史，方便您进行系统维护和管理。
具体设置请参见configure.properties文件内的配置说明。
